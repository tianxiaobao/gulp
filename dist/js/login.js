define(function(require,exports,module){function Check(){this.init()}var $=require("jquery");Check.prototype.init=function(){$("form").find("input").each(function(){$(this).focus(function(){$("form").find("dl").removeClass("focus"),$(this).parents("dl").addClass("focus")}),$(window).keypress(function(event){var key=event.which;13==key&&$(".button").click()})})},Check.prototype.login=function(){var _self=this;$(".button").click(function(){$.post("/api/login.php",{username:$("#user").val(),password:$("#password").val(),action:"login",forword:url},function(msg){var data=JSON.parse(msg);data.url?window.location.href=data.url:_self.setTip(data.errmsg)})})},Check.prototype.regist=function(){var _self=this;$(".button").click(function(){$.post("/api/login.php",{mobile:$("#mobile").val(),smsvode:$("#smsvode").val(),password:$("#password").val()},function(msg){var data=JSON.parse(msg);data.url?window.location.href=data.url:_self.setTip(data.errmsg)})})},Check.prototype.lostpass=function(){var _self=this;$(".button").click(function(){$.post("/api/login.php",{mobile:$("#mobile").val(),smsvode:$("#smsvode").val(),password:$("#password").val()},function(msg){var data=JSON.parse(msg);data.url?window.location.href=data.url:_self.setTip(data.errmsg)})})},Check.prototype.idCode=function(from){var _self=this,num=60,type=from?from:"lostpass";$(".idcode .btn").click(function(){$.post("/api/login.php",{username:$("#mobile").val(),action:"yzCode",type:type},function(msg){var data=JSON.parse(msg);if(_self.setTip(data.errmsg),"10017"==data.status){$(".idcode .btn").attr("disabled","true").css("background-color","#ccc");var interval=window.setInterval(function(){num-=1,$(".idcode .btn").attr("value",num+"秒后重新发送"),num<1&&($(".idcode .btn").attr("disabled",!1).css("background-color","#ff5c5c"),clearInterval(interval),$(".idcode .btn").attr("value","发送短信验证码"),num=60)},1e3);$(".tips").css("display","none")}})})},Check.prototype.setTip=function(s){$(".tips").text(s).css("display","block")},module.exports=new Check});